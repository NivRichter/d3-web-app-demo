(this["webpackJsonpd3-web-app-demo"]=this["webpackJsonpd3-web-app-demo"]||[]).push([[0],{35:function(e,t,a){e.exports=a(60)},40:function(e,t,a){},41:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),i=a.n(s),o=(a(40),a(6)),l=a(7),c=a(12),u=a(10),d=a(9),g=(a(41),a(5)),h=a(62),p=a(24),f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={jsonData:{},diseaseName:""},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.makeGraph(this.props.jsonData,this.props.diseaseName,this.props.proteins,this.props.drugs)}},{key:"render",value:function(){return g.selectAll("svg > *").remove(),r.a.createElement(h.a,null,r.a.createElement(p.a,null,r.a.createElement("div",{id:"dataviz_graph",style:{width:"100%",height:"1080px"}},r.a.createElement("svg",{className:"GraphSvg",id:"graph",style:{backgroundColor:"white",height:"1080px",width:"100%"}},r.a.createElement("g",{id:"graphCart"})))))}},{key:"makeGraph",value:function(e,t,a,n){if(e.hasOwnProperty(t)){console.log("starting to paint graph...");var r=[],s=[],i=1;for(var o in r.push({id:t,name:t,type:"disease"}),a)if(r.push({id:a[o],name:a[o],type:"protein"}),s.push({target:a[o],source:t}),n[a[o]].length<10)for(var l in n[a[o]]){var c=n[a[o]][l];r.push({id:"".concat(c).concat(i),name:c,type:"drug"}),s.push({target:"".concat(c).concat(i),source:a[o]}),i++}var u=window.innerWidth,d=window.innerHeight+400,h=g.select("#dataviz_graph").select("svg").append("g");g.select("#dataviz_graph").call(g.zoom().on("zoom",(function(){h.attr("transform",g.event.transform)})));var p=g.forceLink().id((function(e){return e.id})),f=g.forceSimulation().force("charge",g.forceManyBody().strength(-300)).force("center",g.forceCenter(u/2,d/2)).force("link",p),m=h.append("g").attr("class","links").selectAll("line").data(s).enter().append("line").attr("stroke-dasharray",3).attr("stroke","rgba(50, 50, 50, 0.4)");function v(e){return"disease"===e.type?"red":"protein"===e.type?"#1589FF":"green"}var y=h.append("g").attr("class","nodes").selectAll("circle").data((x=r,x.filter((function(e){return"protein"===e.type})))).enter().append("circle").attr("r",8).attr("fill",v).on("mouseover",(function(e){g.select(this).style("fill","yellow")})).on("mouseout",(function(e){g.select(this).style("fill","#1589FF")})),E=h.append("g").attr("class","nodes").selectAll("rect").data(function(e){return e.filter((function(e){return"disease"===e.type}))}(r)).enter().append("rect").attr("width",15).attr("height",15).attr("fill",v).on("mouseover",(function(e){g.select(this).style("fill","yellow")})).on("mouseout",(function(e){g.select(this).style("fill","red")})),w=h.append("g").attr("class","nodes").selectAll("circle").data(function(e){return e.filter((function(e){return"drug"===e.type}))}(r)).enter().append("circle").attr("r",6).attr("fill",v).on("mouseover",(function(e){g.select(this).style("fill","yellow")})).on("mouseout",(function(e){g.select(this).style("fill","#348017")})),b=h.append("g").attr("class","texts").selectAll("text").data(r).enter().append("text").text((function(e){return e.name})).attr("font-size",11).attr("dx",15).attr("dy",4).attr("fill",v).attr("font-weight","bold");f.nodes(r).on("tick",(function(){y.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),E.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),w.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),b.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),m.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))})),f.force("link").links(s)}var x}}]),a}(n.Component),m=a(13),v=a(66),y=a(65),E=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.props.hideChart();var t=n.props.suggestions,a=e.currentTarget.value;if(console.log(t),0===t.length)n.setState({activeSuggestion:1,filteredSuggestions:["Loading..."],showSuggestions:!0,userInput:e.currentTarget.value});else{var r=t.filter((function(e){return 0===e.toLowerCase().indexOf(a.toLowerCase())}));n.setState({activeSuggestion:0,filteredSuggestions:r,showSuggestions:!0,userInput:e.currentTarget.value})}},n.onClick=function(e){n.setState({activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:e.currentTarget.innerText}),n.props.handler(e,e.currentTarget.innerText)},n.onKeyDown=function(e){var t=n.state,a=t.activeSuggestion,r=t.filteredSuggestions;if(13===e.keyCode)n.setState({activeSuggestion:0,showSuggestions:!1,userInput:r[a]});else if(38===e.keyCode){if(0===a)return;n.setState({activeSuggestion:a-1})}else if(40===e.keyCode){if(a-1===r.length)return;n.setState({activeSuggestion:a+1})}},n.state={activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:""},n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this.onChange,s=this.onClick,i=this.onKeyDown,o=this.state,l=o.activeSuggestion,c=o.filteredSuggestions,u=o.showSuggestions,d=o.userInput;return u&&d&&(t=c.length?r.a.createElement(v.a,{className:"suggestions"},c.map((function(e,t){var a;return t===l&&(a="suggestion-active"),r.a.createElement(v.a.Item,{className:a,key:e,onClick:s},e)}))):r.a.createElement(v.a,{className:"no-suggestions"},r.a.createElement(v.a.Item,null,"No suggestions, you're on your own!"))),r.a.createElement(n.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(y.a.Group,{controlId:"formBasicDisease"},r.a.createElement(y.a.Control,(e={type:"text",placeholder:"Enter disease name (i.e COVID-19)"},Object(m.a)(e,"type","text"),Object(m.a)(e,"onChange",a),Object(m.a)(e,"onKeyDown",i),Object(m.a)(e,"value",d),e)),t)))}}]),a}(n.Component);E.defaultProps={suggestions:[]};var w=E,b=a(28),x=a.n(b),S=a(17),k=a.n(S),j=(a(57),a(58),a(63)),C=a(67),D=a(68),O=a(64),I=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).AutoCompleteHandler=n.AutoCompleteHandler.bind(Object(c.a)(n)),n.hideChart=n.hideChart.bind(Object(c.a)(n)),n.state={value:"",disease:"",diseases:[],jsonData:{},jsonDrugs:{},drugs:[],view:!1,open:!1};return k.a.initialize("UA-180348020-1",{debug:!0}),k.a.pageview(window.location.pathname+window.location.search),n}return Object(l.a)(a,[{key:"hideChart",value:function(){this.setState({view:!1,open:!1})}},{key:"AutoCompleteHandler",value:function(e,t){this.setState({disease:t,value:t})}},{key:"componentDidMount",value:function(){var e=this;console.log("mounting APP");var t="https://api.jsonbin.io/b/5f74bd117243cd7e824742f6";fetch(t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"secret-key":"$2b$10$ySWzEs3S9JUHfDfnYERQc.EsFmQlIYLt5Jab9bvVm3zU6g1dvMJ8m"}}).then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{jsonData:t}})),e.getDiseases(t)})),t="https://api.jsonbin.io/b/5f762e2c7243cd7e82484f0c",fetch(t,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"secret-key":"$2b$10$ySWzEs3S9JUHfDfnYERQc.EsFmQlIYLt5Jab9bvVm3zU6g1dvMJ8m"}}).then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{jsonDrugs:t}}))}))}},{key:"getDiseases",value:function(e){var t=[];for(var a in e)t.push(a);this.setState({diseases:t})}},{key:"onInput",value:function(e){e.preventDefault(),this.setState({value:e.target.value,view:!1,open:!1}),console.log("key")}},{key:"getData",value:function(){var e=this,t=this.state.jsonData[this.state.value],a={};for(var n in t)a[t[n]]=this.state.jsonDrugs[t[n]];this.setState((function(t){return{proteins:e.state.jsonData[e.state.value],disease:e.state.value,drugs:a}}))}},{key:"onEnter",value:function(e){console.log("enter"),e.preventDefault(),this.setState((function(e){return{view:!0,open:!0}})),k.a.event({category:"Submit",action:"Searched Disease",label:this.state.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{fluid:!0,style:{backgroundImage:"url(https://eskipaper.com/images/high-res-abstract-backgrounds-1.jpg)"}},r.a.createElement(h.a,null,r.a.createElement(p.a,{md:3,xs:12},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/en/thumb/2/29/Ben-Gurion_University_of_the_Negev.svg/1200px-Ben-Gurion_University_of_the_Negev.svg.png",alt:"",style:{height:"150px",width:"150px",paddingTop:"10px"}})),r.a.createElement(p.a,{md:6,xs:12},r.a.createElement("h1",{style:{display:"flex",justifyContent:"center",fontFamily:"Arial Black",color:"white"}},"Disease - Protein - Drug"," "),r.a.createElement("br",null),0===this.state.diseases.length?r.a.createElement(h.a,null,r.a.createElement(p.a,{xs:12,md:12},r.a.createElement("div",{style:{width:"100px",display:"flex",alignItems:"center",marginLeft:"auto",marginRight:"auto"}},r.a.createElement(C.a,{in:!0},r.a.createElement(x.a,{size:100,color:"#123abc",loading:!0}))))):r.a.createElement(C.a,{in:!0},r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:5,xs:8,style:{paddingRight:"0px"}},r.a.createElement(w,{suggestions:this.state.diseases,handler:this.AutoCompleteHandler,hideChart:this.hideChart})),r.a.createElement(p.a,{md:1,xs:3,style:{paddingLeft:"0px"}},r.a.createElement(D.a,{variant:"primary",className:"button",onClick:function(t){e.getData(),e.onEnter(t)},"aria-controls":"example-fade-text","aria-expanded":this.state.open},"SUBMIT ",r.a.createElement("br",null)))))),r.a.createElement(p.a,{xs:3},r.a.createElement(C.a,{in:this.state.diseases.length>0},r.a.createElement(O.a,{style:{marginTop:"50px",height:"auto",width:"200px",color:"white",fontSize:"19px",display:"flex",justifyContent:"center"}},this.state.view?r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"r-cl"},"Disease")),r.a.createElement("tr",null,r.a.createElement("td",{className:"c-p-cl"},"Protein")),r.a.createElement("tr",null,r.a.createElement("td",{className:"c-d-cl"},"Drug"))):null)))),r.a.createElement(h.a,{style:{marginTop:"20px",width:"100%"}},r.a.createElement(p.a,{style:{width:"100%"}},r.a.createElement(C.a,{in:this.state.open},r.a.createElement("div",{id:"example-fade-text"},r.a.createElement(f,{jsonData:this.state.jsonData,diseaseName:this.state.disease,proteins:this.state.proteins,drugs:this.state.drugs}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.5543f306.chunk.js.map